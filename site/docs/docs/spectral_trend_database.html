<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="spectral_trend_database.gee package" href="spectral_trend_database.gee.html" /><link rel="prev" title="Spectral Trend Database Documentation" href="../index.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>spectral_trend_database package - Spectral Trend Database 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Spectral Trend Database 0.0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Spectral Trend Database 0.0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">spectral_trend_database package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of spectral_trend_database package</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="spectral_trend_database.gee.html">spectral_trend_database.gee package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spectral_trend_database.gee.html">spectral_trend_database.gee package</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/docs/spectral_trend_database.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="spectral-trend-database-package">
<h1>spectral_trend_database package<a class="headerlink" href="#spectral-trend-database-package" title="Link to this heading">¶</a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Link to this heading">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="spectral_trend_database.gee.html">spectral_trend_database.gee package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="spectral_trend_database.gee.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="spectral_trend_database.gee.html#module-spectral_trend_database.gee.landsat">spectral_trend_database.gee.landsat module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.landsat.cloud_masked_rescaled_ic_for_mission"><code class="docutils literal notranslate"><span class="pre">cloud_masked_rescaled_ic_for_mission()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.landsat.cloud_masked_rescaled_image"><code class="docutils literal notranslate"><span class="pre">cloud_masked_rescaled_image()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.landsat.harmonized_cloud_masked_rescaled_ic"><code class="docutils literal notranslate"><span class="pre">harmonized_cloud_masked_rescaled_ic()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spectral_trend_database.gee.html#module-spectral_trend_database.gee.utils">spectral_trend_database.gee.utils module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.utils.get_ee_xrr"><code class="docutils literal notranslate"><span class="pre">get_ee_xrr()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.utils.get_info"><code class="docutils literal notranslate"><span class="pre">get_info()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.utils.print_info"><code class="docutils literal notranslate"><span class="pre">print_info()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="spectral_trend_database.gee.html#spectral_trend_database.gee.utils.safe_init"><code class="docutils literal notranslate"><span class="pre">safe_init()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="spectral_trend_database.gee.html#module-spectral_trend_database.gee">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-spectral_trend_database.config">
<span id="spectral-trend-database-config-module"></span><h2>spectral_trend_database.config module<a class="headerlink" href="#module-spectral_trend_database.config" title="Link to this heading">¶</a></h2>
<p>config hander</p>
<dl>
<dt>DESCRIPTION:</dt><dd><p>provides an interface to access constants
defined in <cite>spectral_trend_database/constants.py</cite> or
user config defined in <cite>config/user.yaml</cite>.</p>
<p>values can be accessed through <cite>c.get(key, default)</cite> if default is
required. otherwise use dot-notaion (c.key) or superscript (c[key])</p>
<p>note: the user config overwrites the constants.</p>
</dd>
<dt>USAGE:</dt><dd><p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>python
from spectral_trend_database.config import config as c</p>
<p>print(c.some_key_in_user_config_yaml)
print(c.some_constant_in_spectral_trend_database_constants)
<a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
</dd>
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="spectral_trend_database.config.ConfigHandler">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spectral_trend_database.config.</span></span><span class="sig-name descname"><span class="pre">ConfigHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">path:</span> <span class="pre">str,</span> <span class="pre">constants:</span> <span class="pre">~types.ModuleType</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">&lt;module</span> <span class="pre">'spectral_trend_database.constants'</span> <span class="pre">from</span> <span class="pre">'/Users/brookieguzder-williams/code/dse/COVERCROPS/spectral_trend_database/repo/spectral_trend_database/constants.py'&gt;,</span> <span class="pre">protected_keys:</span> <span class="pre">list[str]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">['ROOT_MODULE',</span> <span class="pre">'INFO_TYPES',</span> <span class="pre">'SAFE_NAN_VALUE',</span> <span class="pre">'DATETIME_NS',</span> <span class="pre">'DATETIME_MS']</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/config.html#ConfigHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.config.ConfigHandler" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">UserDict</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.config.ConfigHandler.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">d</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">D[k]</span> <span class="pre">if</span> <span class="pre">k</span> <span class="pre">in</span> <span class="pre">D,</span> <span class="pre">else</span> <span class="pre">d.</span>&#160; <span class="pre">d</span> <span class="pre">defaults</span> <span class="pre">to</span> <span class="pre">None.</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/config.html#ConfigHandler.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.config.ConfigHandler.get" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-spectral_trend_database.constants">
<span id="spectral-trend-database-constants-module"></span><h2>spectral_trend_database.constants module<a class="headerlink" href="#module-spectral_trend_database.constants" title="Link to this heading">¶</a></h2>
<p>project paths/constants</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>constants (excluding “FIXED” constants) can be overwritten
using yaml file at <cite>config/user.yaml</cite></p>
</div>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
</section>
<section id="module-spectral_trend_database.gcp">
<span id="spectral-trend-database-gcp-module"></span><h2>spectral_trend_database.gcp module<a class="headerlink" href="#module-spectral_trend_database.gcp" title="Link to this heading">¶</a></h2>
<p>convience methods for bigquery</p>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.gcp.create_or_update_table_from_json">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.gcp.</span></span><span class="sig-name descname"><span class="pre">create_or_update_table_from_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wait</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Client</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Table</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/gcp.html#create_or_update_table_from_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.gcp.create_or_update_table_from_json" title="Link to this definition">¶</a></dt>
<dd><p>create/update table from (line deliminated) json</p>
<dl class="simple">
<dt>Note: list valued columns failed if they contained NaNs. Substitue NaNs</dt><dd><p>with value (such as -99999) and replace after loading table.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>bq.Dataset</em>) – instance of bigquery dataset to create table in</p></li>
<li><p><strong>name</strong> (<em>str</em>) – name for table</p></li>
<li><p><strong>uri</strong> (<em>str</em>) – cloud-storage uri of line-deliminated-json</p></li>
<li><p><strong>wait</strong> (<em>bool = True</em>) – wait from creation to complete before continuing</p></li>
<li><p><strong>return_table</strong> (<em>bool = False</em>) – if true return bigquery table instance</p></li>
<li><p><strong>project</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – gcp project name</p></li>
<li><p><strong>None</strong><strong>)</strong> (<em>client Optional</em><em>[</em><em>bq.Client</em><em>] </em><em>=</em>) – instance of bigquery client
if None a new one will be instantiated</p></li>
<li><p><strong>timeout</strong> (<em>int=30</em>) – timeout (seconds)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>bigquery table instance</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>if &lt;return table&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.gcp.gcs_list">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.gcp.</span></span><span class="sig-name descname"><span class="pre">gcs_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'gs://'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Client</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/gcp.html#gcs_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.gcp.gcs_list" title="Link to this definition">¶</a></dt>
<dd><p>list cloud storage objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – file-path may or may not include scheme</p></li>
<li><p><strong>*args</strong> (<em>str</em>) – ordered additional parts to path (see Usage in <cite>process_gcs_path</cite> above)</p></li>
<li><p><strong>search</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – only return paths containing &lt;search&gt;</p></li>
<li><p><strong>prefix</strong> (<em>str = c.URI_PREFIX</em>) – if exists add prefix to begining of string. For
URIs use <cite>c.URI_PREFIX</cite>, for URLs us <cite>c.URL_PREFIX</cite>.</p></li>
<li><p><strong>project</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – gcp project name</p></li>
<li><p><strong>None</strong><strong>)</strong> (<em>client Optional</em><em>[</em><em>bq.Client</em><em>] </em><em>=</em>) – instance of bigquery client
if None a new one will be instantiated</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of cloud storage object paths</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.gcp.load_or_create_dataset">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.gcp.</span></span><span class="sig-name descname"><span class="pre">load_or_create_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Client</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/gcp.html#load_or_create_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.gcp.load_or_create_dataset" title="Link to this definition">¶</a></dt>
<dd><p>load or create bigquery dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of dataset</p></li>
<li><p><strong>location</strong> (<em>str='US'</em>) – gcp location</p></li>
<li><p><strong>project</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – gcp project name</p></li>
<li><p><strong>None</strong><strong>)</strong> (<em>client Optional</em><em>[</em><em>bq.Client</em><em>] </em><em>=</em>) – instance of bigquery client
if None a new one will be instantiated</p></li>
<li><p><strong>timeout</strong> (<em>int=30</em>) – timeout (seconds)</p></li>
<li><p><strong>warn</strong> (<em>bool = False</em>) – print message if dataset exist</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>bigquery dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.gcp.process_gcs_path">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.gcp.</span></span><span class="sig-name descname"><span class="pre">process_gcs_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'gs://'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/gcp.html#process_gcs_path"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.gcp.process_gcs_path" title="Link to this definition">¶</a></dt>
<dd><p>process gcs path</p>
<p>Converts path string, or path string plus additional args, to a
cloud storage bucket, filepath tuple</p>
<dl class="simple">
<dt>Usage:</dt><dd><p>process_gcs_path(‘gs://a/b/c.json’) -&gt; ‘a’, ‘b/c.json’
process_gcs_path(‘a/b/c.json’) -&gt; ‘a’, ‘b/c.json’
process_gcs_path(‘gs://a’, ‘b’, ‘c.json’) -&gt; ‘a’, ‘b/c.json’
process_gcs_path(‘b’, ‘c.json’, bucket=’a’) -&gt; ‘a’, ‘b/c.json’</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – file-path may or may not include scheme</p></li>
<li><p><strong>*args</strong> (<em>str</em>) – ordered additional parts to path (see Usage above)</p></li>
<li><p><strong>prefix</strong> (<em>str = c.URI_PREFIX</em>) – if exists strip prefix from begining of string. For
URIs use <cite>c.URI_PREFIX</cite>, for URLs us <cite>c.URL_PREFIX</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(tuple) name of gcs bucket, gcs filename-prefix</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.gcp.save_ld_json">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.gcp.</span></span><span class="sig-name descname"><span class="pre">save_ld_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcs_dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcs_bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">create_dirs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/gcp.html#save_ld_json"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.gcp.save_ld_json" title="Link to this definition">¶</a></dt>
<dd><p>save dataframe locally and (optionally) to GCS as line-deliminated JSON</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – source dataframe</p></li>
<li><p><strong>local_dest</strong> (<em>str</em>) – local dest</p></li>
<li><p><strong>gcs_dest</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – if exists export to gcs</p></li>
<li><p><strong>gcs_bucket</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – gcs_bucket (only usde if gcs-dest exists)</p></li>
<li><p><strong>dry_run</strong> (<em>bool = True</em>) – if true print message but don’t save</p></li>
<li><p><strong>create_dirs</strong> (<em>bool = True</em>) – if true create local parent dirs if needed</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>if not dry_run return destination uri if &lt;gcs_dest&gt; is passed,
otherwise return the &lt;local_dest&gt;.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.gcp.upload_file">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.gcp.</span></span><span class="sig-name descname"><span class="pre">upload_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'gs://'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Client</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/gcp.html#upload_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.gcp.upload_file" title="Link to this definition">¶</a></dt>
<dd><p>upload file to cloud storage</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>src</strong> – (str): local source file-path</p></li>
<li><p><strong>path</strong> (<em>str</em>) – destination gcp file-path may or may not include scheme</p></li>
<li><p><strong>*args</strong> (<em>str</em>) – ordered additional parts to path (see Usage in <cite>process_gcs_path</cite> above)</p></li>
<li><p><strong>search</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – only return paths containing &lt;search&gt;</p></li>
<li><p><strong>prefix</strong> (<em>str = c.URI_PREFIX</em>) – if exists add prefix to begining of string. For
URIs use <cite>c.URI_PREFIX</cite>, for URLs us <cite>c.URL_PREFIX</cite>.</p></li>
<li><p><strong>project</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – gcp project name</p></li>
<li><p><strong>None</strong><strong>)</strong> (<em>client Optional</em><em>[</em><em>bq.Client</em><em>] </em><em>=</em>) – instance of bigquery client
if None a new one will be instantiated</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(str) destination uri of uploaded object</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-spectral_trend_database.npxr">
<span id="spectral-trend-database-npxr-module"></span><h2>spectral_trend_database.npxr module<a class="headerlink" href="#module-spectral_trend_database.npxr" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.npxr.execute_func">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.npxr.</span></span><span class="sig-name descname"><span class="pre">execute_func</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">along_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/npxr.html#execute_func"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.npxr.execute_func" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Note: the source data is not passed as a key-word argument</dt><dd><p>it is assumed that the first (variable length) argument
is &lt;data&gt;. Namely <cite>data = args[0]</cite></p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em>) – function to be called on data. &lt;func&gt; must take
data (types.NPXR) as the initial argument plus
additional variable length args and kwargs.</p></li>
<li><p><strong>along_axis</strong> (<em>Union</em><em>[</em><em>int</em><em>, </em><em>Literal</em><em>[</em><em>False</em><em>]</em><em>] </em><em>= False</em>) – if (int): use np.apply_along_axis to apply
the decorated function along axis=&lt;along_axis&gt;
otherwise: apply decorator on the full data</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to include.
if &lt;data_vars&gt; is None all data_vars will be used</p></li>
<li><p><strong>exclude</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to exclude.</p></li>
<li><p><strong>rename</strong> (<em>dict</em>) – [only used for xr data] mapping from data_var name to renamed data_var name</p></li>
<li><p><strong>*args</strong> – additional variable length arguments to be passed to &lt;func&gt;
if &lt;data&gt; is None: data = &lt;args&gt;[0] and &lt;args&gt;[1:]
becomes the additional variable length arguments</p></li>
<li><p><strong>**kwargs</strong> – additional kwargs to be passed to &lt;func&gt;. if &lt;kwargs&gt; contains
‘data’, that will be popped from kwargs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>data processed by &lt;func&gt;, possibly along an axis, in the same format
as the initial source data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.npxr.npxr">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.npxr.</span></span><span class="sig-name descname"><span class="pre">npxr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">along_axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/npxr.html#npxr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.npxr.npxr" title="Link to this definition">¶</a></dt>
<dd><p>decorator for functions that take in and return
numpy arrays to extend their behavior to xarray.</p>
<dl class="simple">
<dt>Note: decorated functions must take data (types.NPXR)</dt><dd><p>as the initial argument plus additional variable
length args and kwargs.</p>
</dd>
</dl>
<p>Usage:</p>
<blockquote>
<div><p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>python
&#64;npxr()
def plus1(arr):</p>
<blockquote>
<div><p>return arr + 1</p>
</div></blockquote>
<p>ds_plus_1 = plus1(ds)               # returns xr.Dataset
da_plus_1 = plus1(ds.blah)          # returns xr.DataArray
np_plus_1 = plus1(ds.blah.data)     # returns np.data
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>Now let <cite>values = utils.to_ndarray(ds)</cite> be the array
representation of <cite>ds.data_vars</cite>.</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>python
&#64;npxr(along_axis=1)
def plus1_along_axis(arr):</p>
<blockquote>
<div><p>return arr + 1</p>
</div></blockquote>
<p>p1 = plus1(values)
p1_along_axis = plus1_along_axis(values)
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>Here <cite>p1</cite> is equal to <cite>values + 1</cite> and
<cite>p1_along_axis</cite> is equal to</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>python
np.apply_along_axis(</p>
<blockquote>
<div><p>lambda a: a + 1,
axis=1,
arr=values)</p>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>Note: this is the same result as</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">p1_along_axis_v2</span> <span class="pre">=</span> <span class="pre">plus1(values,</span> <span class="pre">along_axis=1)</span>
<span class="pre">`</span></code></p>
<p>(see <a href="#id33"><span class="problematic" id="id34">**</span></a>kwargs below).</p>
</div></blockquote>
<dl class="simple">
<dt>Decorator Args:</dt><dd><dl class="simple">
<dt>along_axis (Union[int, Literal[False]] = False):</dt><dd><p>if (int): use np.apply_along_axis to apply
the decorated function along axis=&lt;along_axis&gt;
otherwise: apply decorator on the full data</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to include. if None all data_vars will be used</p></li>
<li><p><strong>exclude</strong> (<em>Sequence</em><em>[</em><em>str</em><em>] </em><em>=</em><em> [</em><em>]</em>) – (xr.dataset only) list of data_var names to exclude.</p></li>
<li><p><strong>rename</strong> (<em>dict</em>) – [only used for xr data] mapping from data_var name to renamed data_var name</p></li>
<li><p><strong>**kwargs</strong> – additional kwargs to be passed to decorated function.
- if &lt;kwargs&gt; contains ‘data’, that will be popped from kwargs.
and used as the source data
- if &lt;kwargs&gt; contains ‘along_axis’, that will be popped out and
used to override the decorator-arg (along_axis)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>decorated function that accepts xr.dataset/data_array as well as np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.npxr.post_process_npxr_data">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.npxr.</span></span><span class="sig-name descname"><span class="pre">post_process_npxr_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/npxr.html#post_process_npxr_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.npxr.post_process_npxr_data" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.NPXR</em>) – source np.array|xr.dataset|xr.data_array</p></li>
<li><p><strong>values</strong> (<em>types.NPD</em>) – processed numpy array</p></li>
<li><p><strong>rename</strong> (<em>dict</em>) – [only used for xr data] mapping from data_var name to renamed data_var name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>data with drops removed and replaced by nan</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.npxr.sequencer">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.npxr.</span></span><span class="sig-name descname"><span class="pre">sequencer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/npxr.html#sequencer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.npxr.sequencer" title="Link to this definition">¶</a></dt>
<dd><p>run a sequence of npxr-decorated methods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.NPXR</em>) – source data</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>]</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list, or list of lists, of data_var names to include.
if None all data_vars will be used. if list of “lists the list” must be
the same length as &lt;func_list&gt;</p></li>
<li><p><strong>exclude</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>]</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list, or list of lists, of data_var names to exclude.
if “list of lists” the list must be the same length as &lt;func_list&gt;</p></li>
<li><p><strong>rename</strong> (<em>Union</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>Sequence</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em><em>]</em>) – [only used for xr data] mapping, or list of mappings, from data_var name
to renamed data_var name. if “list of mappings” the list must be the same
length as &lt;func_list&gt;</p></li>
<li><p><strong>func_list</strong> (<em>Sequence</em><em>[</em><em>Callable</em><em>]</em>) – ordered list of functions to execute</p></li>
<li><p><strong>args_list</strong> (<em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>list</em><em>, </em><em>dict</em><em>, </em><em>Literal</em><em>[</em><em>False</em><em>]</em><em>]</em><em>]</em>) – <dl class="simple">
<dt>list of arguments for aligned function. an element “&lt;args&gt;” should be</dt><dd><ul>
<li><p>False: to skip this function</p></li>
<li><p>a tuple such that, <cite>args, kwargs = &lt;args&gt;</cite> and func(data, <a href="#id35"><span class="problematic" id="id36">*</span></a>args, <a href="#id37"><span class="problematic" id="id38">**</span></a>kwargs)</p></li>
<li><p>a list such that, <cite>args = &lt;args&gt;</cite> and func(data, <a href="#id39"><span class="problematic" id="id40">*</span></a>args)</p></li>
<li><p>a dict such that, <cite>kwargs = &lt;args&gt;</cite> and func(data, <a href="#id41"><span class="problematic" id="id42">**</span></a>kwargs)</p></li>
<li><p>otherswise, such that, func(data, &lt;args&gt;)</p></li>
</ul>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>output data (and possibly intermediate steps) after processing through sequence.
form will be the same as type as the input data (np.array|xr.data_array|xr.dataset)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-spectral_trend_database.paths">
<span id="spectral-trend-database-paths-module"></span><h2>spectral_trend_database.paths module<a class="headerlink" href="#module-spectral_trend_database.paths" title="Link to this heading">¶</a></h2>
<p>convience methods for creating path management</p>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.paths.gcs">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.paths.</span></span><span class="sig-name descname"><span class="pre">gcs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'agriculture_monitoring'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'spectral_trend_database/v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'uri'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kill_cache</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/paths.html#gcs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.paths.gcs" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.paths.local">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.paths.</span></span><span class="sig-name descname"><span class="pre">local</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'/Users/brookieguzder-williams/code/dse/COVERCROPS/spectral_trend_database'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_dir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'data/v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/paths.html#local"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.paths.local" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-spectral_trend_database.query">
<span id="spectral-trend-database-query-module"></span><h2>spectral_trend_database.query module<a class="headerlink" href="#module-spectral_trend_database.query" title="Link to this heading">¶</a></h2>
<p>utility methods</p>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">QueryConstructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_escape</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'`'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">how</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'LEFT'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'RIGHT'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'INNER'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'OUTER'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'left'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'right'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'inner'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'outer'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'LEFT'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">using</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class for constructing SQL queries</p>
<p>Usage:</p>
<blockquote>
<div><p>Constructs SQL queries</p>
<p>using python:</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">sqlc</span> <span class="pre">=</span> <span class="pre">QueryConstructor('table1',</span> <span class="pre">using='sample_id')</span>
<span class="pre">sqlc.select('sample_id',</span> <span class="pre">'c1',</span> <span class="pre">'c2',</span> <span class="pre">c3='c_three')</span>
<span class="pre">sqlc.join('table2',</span> <span class="pre">how='right',</span> <span class="pre">on='c2')</span>
<span class="pre">sqlc.join('table3',</span> <span class="pre">on=('c2',</span> <span class="pre">'c3p2'))</span>
<span class="pre">sqlc.join('table4')</span>
<span class="pre">sqlc.where(c2=123456)</span>
<span class="pre">sqlc.where('table3',</span> <span class="pre">c_three=1234,</span> <span class="pre">c_three_op='&lt;=')</span>
<span class="pre">sqlc.limit(100)</span>
<span class="pre">print(sqlc.sql())</span>
<span class="pre">`</span></code></p>
<p>or using a config file:</p>
<p><a href="#id43"><span class="problematic" id="id44">``</span></a><a href="#id45"><span class="problematic" id="id46">`</span></a>yaml
# example.yaml
init:</p>
<blockquote>
<div><p>table: table1
using: sample_id
table_escape: null</p>
</div></blockquote>
<dl>
<dt>select:</dt><dd><ul class="simple">
<li><p>c1, c2</p></li>
<li><p>c3: as c_three</p></li>
</ul>
</dd>
<dt>join:</dt><dd><ul>
<li><p>table: table2
how: right
on: c2</p></li>
<li><p>table: table3
on:</p>
<blockquote>
<div><ul class="simple">
<li><p>c2</p></li>
<li><p>c3p2</p></li>
</ul>
</div></blockquote>
</li>
<li><p>table: table 4</p></li>
</ul>
</dd>
<dt>where:</dt><dd><ul class="simple">
<li><p>c2: 123456</p></li>
<li><p>table: table3
c_three: 1234
c_three_op: ‘&lt;=’</p></li>
</ul>
</dd>
</dl>
<p>limit: 100
<a href="#id47"><span class="problematic" id="id48">``</span></a><a href="#id49"><span class="problematic" id="id50">`</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">sqlc</span> <span class="pre">=</span> <span class="pre">QueryConstructor.from_config('table1',</span> <span class="pre">using='sample_id')</span>
<span class="pre">print(sqlc.sql())</span>
<span class="pre">`</span></code></p>
<p>resulting in</p>
<p><a href="#id51"><span class="problematic" id="id52">``</span></a><a href="#id53"><span class="problematic" id="id54">`</span></a>sql
SELECT sample_id, c1, c2, c3 as c_three FROM table1
RIGHT JOIN table2 ON table1.c2 = table2.c2
LEFT JOIN table3 ON table1.c2 = table3.c3p2
LEFT JOIN table4 USING (sample_id)
WHERE table1.c2 = 123456 AND table3.c_three &lt;= 1234
LIMIT 100</p>
<p>‘SELECT c1, c2, c3 as as c_three FROM <cite>table1</cite>
RIGHT JOIN <cite>table2</cite> USING (sample_id)
LEFT JOIN <cite>table3</cite> USING (sample_id)
LEFT JOIN <cite>table 4</cite> USING (sample_id)
WHERE <cite>table1</cite>.c2 = 123456 AND <cite>table3</cite>.c_three &lt;= 1234
LIMIT 100’
<a href="#id55"><span class="problematic" id="id56">``</span></a><a href="#id57"><span class="problematic" id="id58">`</span></a></p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.append"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.append" title="Link to this definition">¶</a></dt>
<dd><p>append strings seperated by a space to end of sql statement</p>
<p>This has been included to allow users to add explicit SQL statements which
may not be possible with current API.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>*values</strong> (<em>str</em>) – append each element of &lt;values&gt; to end of sql statement
but before LIMIT</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.from_config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.from_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.from_config" title="Link to this definition">¶</a></dt>
<dd><p>generate QueryConstructor instance from config file</p>
<p>Constructs SQL query sing a config dict where each of the keys are methods on
QueryConstructor, where the values are dicts or list of dicts for the arguments
of the QueryConstructor methods.</p>
<p>Note the QueryConstructor.__init__ function simply uses the key “init”.</p>
<p class="rubric">Example</p>
<p><a href="#id59"><span class="problematic" id="id60">``</span></a><a href="#id61"><span class="problematic" id="id62">`</span></a>yaml
# example.yaml
init:</p>
<blockquote>
<div><p>table: table1
using: sample_id
table_escape: null</p>
</div></blockquote>
<dl>
<dt>join:</dt><dd><ul>
<li><p>table: table2</p></li>
<li><p>table: table3</p></li>
<li><p>table: table3
using:</p>
<blockquote>
<div><ul class="simple">
<li><p>sample_id</p></li>
<li><p>year</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</dd>
<dt>where:</dt><dd><ul class="simple">
<li><p>year: 2020</p></li>
<li><p>year_op: ‘&lt;=’</p></li>
</ul>
</dd>
</dl>
<p><a href="#id63"><span class="problematic" id="id64">``</span></a><a href="#id65"><span class="problematic" id="id66">`</span></a></p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">config</span> <span class="pre">=</span> <span class="pre">load_yaml('example.yaml')</span>
<span class="pre">sqlc</span> <span class="pre">=</span> <span class="pre">QueryConstructor.from_config(config)</span>
<span class="pre">print(sqlc.sql())</span>
<span class="pre">`</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">`sql</span>
<span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">table1</span>
<span class="pre">LEFT</span> <span class="pre">JOIN</span> <span class="pre">table2</span> <span class="pre">USING</span> <span class="pre">(sample_id)</span>
<span class="pre">LEFT</span> <span class="pre">JOIN</span> <span class="pre">table3</span> <span class="pre">USING</span> <span class="pre">(sample_id)</span>
<span class="pre">LEFT</span> <span class="pre">JOIN</span> <span class="pre">table3</span> <span class="pre">USING</span> <span class="pre">(sample_id,</span> <span class="pre">year)</span>
<span class="pre">WHERE</span> <span class="pre">table1.year</span> <span class="pre">&lt;=</span> <span class="pre">2020</span>
<span class="pre">`</span></code></p>
<p class="rubric">Notes</p>
<ul>
<li><dl>
<dt>JOIN note on “on”:</dt><dd><p>PyYaml converts “on” to True (even for keys). i’ve allowed
for “on”-key in 3 ways:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>make string explicit with quotes. ie <cite>‘on’: sample_id</cite></p></li>
<li><p>use “on_columns”: ie <cite>on_columns: sample_id</cite></p></li>
<li><p>leave it as on. the config will show up <cite>True: sample_id</cite>, but
within a join this will be converted to “on”.</p></li>
</ol>
</div></blockquote>
</dd>
</dl>
</li>
<li><dl>
<dt>WHERE note on “_op”:</dt><dd><p>As discussed below: in the <cite>where</cite> method if kwarg ends in “_op” it is
used as the comparison operator (otherwise the operator) is “=”.</p>
<dl class="simple">
<dt>for example:</dt><dd><p><cite>year=2010</cite> =&gt;  “… WHERE year=2010”, but
<cite>year=2010, year_op=”&lt;”</cite> =&gt; “… WHERE year&lt;2010”</p>
</dd>
</dl>
<p>this will be problamatic in a yaml file for some operators. escape these values
with quotes: ie <cite>year_op: ‘&lt;=’</cite></p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.join">
<span class="sig-name descname"><span class="pre">join</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">using</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">how</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">on</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">join_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.join"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.join" title="Link to this definition">¶</a></dt>
<dd><p>add join</p>
<dl class="simple">
<dt>When constructing JOINs we prioritze &lt;using&gt; over &lt;on&gt;. Namely:</dt><dd><ol class="arabic simple">
<li><p>If &lt;using&gt; use &lt;using&gt;</p></li>
<li><p>Else If &lt;on&gt; use &lt;on&gt;</p></li>
<li><p>Else If &lt;self._default_using&gt; use &lt;self._default_using&gt;</p></li>
<li><p>Else If &lt;self._default_on&gt; use &lt;self._default_on&gt;</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>str</em>) – table name to join</p></li>
<li><p><strong>*using</strong> (<em>str</em>) – column names for <cite>JOIN … USING</cite>
uses default &lt;using&gt; set in initialization method if None</p></li>
<li><p><strong>how</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>=None</em>) – type of join [LEFT, RIGHT, INNER, OUTER]
uses default &lt;how&gt; set in initialization method if None</p></li>
<li><p><strong>on</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>Sequence</em><em>, </em><em>str</em><em>]</em><em>]</em><em>=None</em>) – string or list of strings to <cite>JOIN … ON</cite>
uses default &lt;on&gt; set in initialization method if None</p></li>
<li><p><strong>join_table</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>=None</em>) – name of table to join with
uses &lt;table&gt; passed in initialization method if None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.limit">
<span class="sig-name descname"><span class="pre">limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.limit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.limit" title="Link to this definition">¶</a></dt>
<dd><p>limit number of rows</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>max_rows</strong> (<em>Optional</em><em>[</em><em>int</em><em>]</em><em>=None</em>) – if exists limit number of rows</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.reset" title="Link to this definition">¶</a></dt>
<dd><p>resets instance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.select">
<span class="sig-name descname"><span class="pre">select</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">columns</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">columns_as</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.select"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.select" title="Link to this definition">¶</a></dt>
<dd><p>add select columns</p>
<p>Note: if not called select will revert to <cite>SELECT *</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*columns</strong> (<em>str</em>) – names of columns to include</p></li>
<li><p><strong>**columns_as</strong> (<em>str</em>) – key (name) value (as-name) pairs for renaming columns</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Usage:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">sqlc.select('column_1',</span> <span class="pre">'column_2',</span> <span class="pre">column_3='c3')</span>
<span class="pre">...</span>
<span class="pre">sqlc.sql()</span> <span class="pre">#</span> <span class="pre">=&gt;</span> <span class="pre">'SELECT</span> <span class="pre">column_1,</span> <span class="pre">column_2,</span> <span class="pre">column_3</span> <span class="pre">as</span> <span class="pre">c3</span> <span class="pre">FROM</span> <span class="pre">...'</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.sql">
<span class="sig-name descname"><span class="pre">sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.sql"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.sql" title="Link to this definition">¶</a></dt>
<dd><p>get sql statement</p>
<p>This will construct (if not yet constructed or <cite>force=True</cite>) the sql statment and return
the string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>force</strong> (<em>bool=False</em>) – if true (re)construct sql statement even if it already exists</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(str) SQL statement</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="spectral_trend_database.query.QueryConstructor.where">
<span class="sig-name descname"><span class="pre">where</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#QueryConstructor.where"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.QueryConstructor.where" title="Link to this definition">¶</a></dt>
<dd><p>add where statement</p>
<p>Sets where statement through key value pairs.</p>
<p>if kwarg ends in “_op” it is used as the comparison operator
(otherwise the operator) is “=”.</p>
<dl class="simple">
<dt>for example:</dt><dd><p><cite>year=2010</cite> =&gt;  “… WHERE year=2010”, but
<cite>year=2010, year_op=”&lt;”</cite> =&gt; “… WHERE year&lt;2010”</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>table</strong> (<em>str</em>) – table name used in where statement</p></li>
<li><p><strong>**kwargs</strong> (<em>Union</em><em>[</em><em>str</em><em>, </em><em>int</em><em>, </em><em>float</em><em>]</em>) – key value pairs for where statement
operators set using “_op” as described above</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Usage:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">sqlc.where('table2',</span> <span class="pre">year=2020,</span> <span class="pre">year_op='&lt;',</span> <span class="pre">sample_id='asd23ragwd')</span>
<span class="pre">...</span>
<span class="pre">sqlc.sql()</span> <span class="pre">#</span> <span class="pre">=&gt;</span> <span class="pre">'...</span> <span class="pre">WHERE</span> <span class="pre">table2.year</span> <span class="pre">&lt;</span> <span class="pre">2020</span> <span class="pre">AND</span> <span class="pre">table2.sample_id</span> <span class="pre">=</span> <span class="pre">&quot;asd23ragwd&quot;'</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.query.column_names">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">column_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dse-regenag'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'BiomassTrends'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'column_name'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">QueryJob</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#column_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.column_names" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.query.named_sql">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">named_sql</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uppercase_table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#named_sql"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.named_sql" title="Link to this definition">¶</a></dt>
<dd><p>generate sql command from config file</p>
<p>Uses config file and kwargs to generate SQL query statements. The named query statements
are given as a dict whose keys are the names and the values are configs as discussed in
doc-string for QueryConstructor.from_config above.  Additionally, default values for the
initializer can be added to be used in all “named queries”.</p>
<p>Additionally, pass a &lt;table&gt; to construct simple quieres (where and limit only)
on a single table.</p>
<p>Config Description:</p>
<blockquote>
<div><p>queries-config files have the following parts</p>
<p><a href="#id67"><span class="problematic" id="id68">``</span></a><a href="#id69"><span class="problematic" id="id70">`</span></a>yaml
project: |</p>
<blockquote>
<div><p>[optional] (str) gcp project-name used to generate default table_prefix
if table_prefix absent. ie table_prefix = project.dataset</p>
</div></blockquote>
<dl>
<dt>dataset: |</dt><dd><p>[optional] (str) gcp dataset-name used to generate default table_prefix
if table_prefix absent. ie table_prefix = project.dataset</p>
</dd>
<dt>defaults: |</dt><dd><p>[optional] (dict) default init values for all named queries. may contain
all arguments to QueryConstructor(…) except <cite>table</cite>.
namely: <cite>table_prefix</cite>, <cite>how</cite>, <cite>on</cite>, and <cite>using</cite>.</p>
<dl class="simple">
<dt>notes:</dt><dd><ul class="simple">
<li><p>if table_prefix is absent/empty and <cite>project</cite> and/or <cite>dataset</cite> exist a
table_prefix = project.dataset will be added.</p></li>
<li><p><cite>init</cite> dicts in <cite>queries</cite> dicts below will override the defaults</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>queries: |</dt><dd><p>(dict) key-value pairs of query-name, query-config. the key value pairs are</p>
<p>key: (str) name of query
value: |</p>
<blockquote>
<div><p>(dict | list[dict]) dicts of args/kwargs to QueryConstructor __init__
method (key = <cite>init</cite>) as well as each of QueryConstructor main public methods.
Namely: <cite>select</cite>, <cite>join</cite>, <cite>where</cite>, <cite>append</cite>, and <cite>limit</cite>.</p>
<p>if value is dict the dict args will be passed to named method
if value is list[dict] for each element of value the dict args
will be passed to named method</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><p><a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a>yaml</p>
<p>…</p>
<dl>
<dt>queries:</dt><dd><dl>
<dt>raw_landsat:</dt><dd><dl class="simple">
<dt>init:</dt><dd><p>table: SAMPLE_POINTS
using: sample_id</p>
</dd>
<dt>join:</dt><dd><p>table: LANDSAT_RAW_MASKED</p>
</dd>
</dl>
</dd>
<dt>raw_landsat_between_2020_and_2020:</dt><dd><dl class="simple">
<dt>init:</dt><dd><p>table: SAMPLE_POINTS</p>
</dd>
<dt>join:</dt><dd><p>table: LANDSAT_RAW_MASKED</p>
</dd>
<dt>where:</dt><dd><ul class="simple">
<li><p>year: 2010
year_op: ‘&gt;=’</p></li>
<li><p>year: 2020
year_op: &lt;</p></li>
</ul>
</dd>
</dl>
<p>limit: 23</p>
</dd>
<dt>scym_raw_landsat:</dt><dd><dl class="simple">
<dt>init:</dt><dd><p>table: SAMPLE_POINTS</p>
</dd>
<dt>join:</dt><dd><ul class="simple">
<li><p>table: SCYM_YIELD</p></li>
<li><p>table: LANDSAT_RAW_MASKED
using: sample_id, year</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id75"><span class="problematic" id="id76">``</span></a><a href="#id77"><span class="problematic" id="id78">`</span></a></p>
</div></blockquote>
</dd>
</dl>
</div></blockquote>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>The gcp project and dataset are set using the <cite>project</cite>/<cite>dataset</cite> values. These will
be used to prepend table/join_table names if the table/join_table names do not contain ‘.’</p></li>
<li><p>The <cite>defaults</cite> dict can set default <cite>how</cite>, <cite>on</cite>, and <cite>using</cite> passed to the
QueryConstructor initializer</p></li>
<li><p><cite>queries</cite> is a dictionary with all the named queries. We start my adding creating a
select statement ‘SELECT {select} FROM {table}’, where “{}” indicate the value
subtracted from the named-query dict or the defaults dict. Then we sequentially loop
over the join list using the {table} and {join} values.</p></li>
</ul>
<p class="rubric">Examples</p>
<p>for:</p>
<p><a href="#id79"><span class="problematic" id="id80">``</span></a><a href="#id81"><span class="problematic" id="id82">`</span></a>yaml
project: dse-regenag
dataset: BiomassTrends
defaults:</p>
<blockquote>
<div><p>using: sample_id</p>
</div></blockquote>
<dl class="simple">
<dt>queries:</dt><dd><dl class="simple">
<dt>raw_landsat:</dt><dd><dl class="simple">
<dt>init:</dt><dd><p>table: SAMPLE_POINTS</p>
</dd>
<dt>join:</dt><dd><p>table: LANDSAT_RAW_MASKED
using: sample_id, year</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id83"><span class="problematic" id="id84">``</span></a><a href="#id85"><span class="problematic" id="id86">`</span></a></p>
<p><cite>named_sql(‘raw_landsat’)</cite> will output</p>
<p><code class="docutils literal notranslate"><span class="pre">`sql</span>
<span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">`dse-regenag.BiomassTrends.SAMPLE_POINTS`</span>
<span class="pre">LEFT</span> <span class="pre">JOIN</span> <span class="pre">`dse-regenag.BiomassTrends.LANDSAT_RAW_MASKED`</span>
<span class="pre">USING</span> <span class="pre">(sample_id,</span> <span class="pre">year)</span>
<span class="pre">`</span></code></p>
<p>We can also add a <cite>where</cite> key:</p>
<dl>
<dt><a href="#id87"><span class="problematic" id="id88">``</span></a>` yaml</dt><dd><dl>
<dt>scym_raw_for_2012:</dt><dd><p>table: SAMPLE_POINTS
join:</p>
<blockquote>
<div><ul class="simple">
<li><p>table: SCYM_YIELD</p></li>
<li><p>table: LANDSAT_RAW_MASKED
using: sample_id, year</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>where:</dt><dd><p>year: 2012</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id89"><span class="problematic" id="id90">``</span></a><a href="#id91"><span class="problematic" id="id92">`</span></a></p>
<p>now <cite>named_sql(‘scym_raw_for_2012’)</cite> will output</p>
<p><code class="docutils literal notranslate"><span class="pre">`sql</span>
<span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">`dse-regenag.BiomassTrends.SAMPLE_POINTS`</span>
<span class="pre">LEFT</span> <span class="pre">JOIN</span> <span class="pre">`dse-regenag.BiomassTrends.LANDSAT_RAW_MASKED`</span>
<span class="pre">USING</span> <span class="pre">(sample_id,</span> <span class="pre">year)</span>
<span class="pre">WHERE</span> <span class="pre">`dse-regenag.BiomassTrends.SAMPLE_POINTS`.year</span> <span class="pre">=</span> <span class="pre">2012</span>
<span class="pre">`</span></code></p>
<p>That said, hard coding the where might not be what is desired you can
also do this <cite>named_sql(‘raw_landsat’, year=2012)</cite> to achieve the same
result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>=None</em>) – name of preconfigured config file</p></li>
<li><p><strong>table</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em><em>=None</em>) – (required if name is None) table-name: queries a
single table with optional <cite>WHERE</cite> clause added through
<cite>values</cite> kwargs.</p></li>
<li><p><strong>select</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – a simple select string ie ‘col1, col2, col3 as c3’</p></li>
<li><p><strong>config</strong> (<em>Union</em><em>[</em><em>str</em><em>,</em><em>dict</em><em>]</em><em>=c.DEFAULT_QUERY_CONFIG</em>) – <p>configuration dictionary containg sql-config with key &lt;name&gt;
if (str):</p>
<blockquote>
<div><p>if re.search(r’(yaml|yml)$’, &lt;config&gt;) loads yaml file with at &lt;path config&gt;
else loads yaml at ‘&lt;project-root&gt;/config/named_queries/&lt;config&gt;.yaml’</p>
</div></blockquote>
</p></li>
<li><p><strong>limit</strong> (<em>int=None</em>) – if exits add “LIMIT &lt;limit&gt;” to end of SQL call</p></li>
<li><p><strong>uppercase_table</strong> (<em>bool = True</em>) – if true apply <cite>.upper()</cite> to &lt;table&gt;. Note only used if &lt;table&gt;
is non-null.</p></li>
<li><p><strong>**values</strong> – <p>values for where clause (see usage above).</p>
<p>note: if kwarg ends in “_op” it is used as the comparison operator
(otherwise the operator) is “=”.</p>
<dl class="simple">
<dt>for example:</dt><dd><p><cite>year=2010</cite> =&gt;  “… WHERE year=2010”, but
<cite>year=2010, year_op=”&lt;”</cite> =&gt; “… WHERE year&lt;2010”</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(str) sql command</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.query.process_named_query_config">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">process_named_query_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#process_named_query_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.process_named_query_config" title="Link to this definition">¶</a></dt>
<dd><p>Extracts named query from queries config, and adds defaults.
as well as table_prefix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – queries-config as described above</p></li>
<li><p><strong>query_name</strong> (<em>str</em>) – key for query in queries-config
to extract: config[‘queries’][&lt;query_name&gt;]</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(dict) query-config that can be passed to
QueryConstructor.from_config(…)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.query.queries">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">queries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'v1'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#queries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.queries" title="Link to this definition">¶</a></dt>
<dd><p>list of queries in config file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<em>-</em>) – <p>configuration dictionary containg sql-config with key &lt;name&gt;
if (str):</p>
<blockquote>
<div><p>if re.search(r’(yaml|yml)$’, &lt;config&gt;) loads yaml file with at &lt;path config&gt;
else loads yaml at ‘&lt;project-root&gt;/config/named_queries/&lt;config&gt;.yaml’</p>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.query.run">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sql</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">print_sql</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Client</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">values</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">QueryJob</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.run" title="Link to this definition">¶</a></dt>
<dd><p>queries bigquery</p>
<p>Executes a bigquery query either through an explicit sql string, using the
<cite>sql</cite> arg, or by creating a sql-string using the <cite>named_sql</cite> method above.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – name of preconfigured config file</p></li>
<li><p><strong>table</strong> (<em>Optional</em><em>[</em><em>str</em><em>]</em>) – (required if name is None) table-name: queries a
single table with optional <cite>WHERE</cite> clause added through
<cite>values</cite> kwargs.</p></li>
<li><p><strong>config</strong> (<em>Union</em><em>[</em><em>str</em><em>,</em><em>dict</em><em>]</em><em>=c.DEFAULT_QUERY_CONFIG</em>) – <p>configuration dictionary containg sql-config with key &lt;name&gt;
if (str):</p>
<blockquote>
<div><p>if re.search(r’(yaml|yml)$’, &lt;config&gt;) loads yaml file with at &lt;path config&gt;
else loads yaml at ‘&lt;project-root&gt;/config/named_queries/&lt;config&gt;.yaml’</p>
</div></blockquote>
</p></li>
<li><p><strong>limit</strong> (<em>int=None</em>) – if exits add “LIMIT &lt;limit&gt;” to end of SQL call</p></li>
<li><p><strong>sql</strong> (<em>str=None</em>) – if &lt;name&gt; not provided, explicit sql command to use in query</p></li>
<li><p><strong>print_sql</strong> (<em>bool = False</em>) – if true print sql-string before executing query</p></li>
<li><p><strong>project</strong> (<em>str=None</em>) – gcp project name</p></li>
<li><p><strong>client</strong> (<em>bq.Client=None</em>) – instance of bigquery client
if None a new one will be instantiated</p></li>
<li><p><strong>**values</strong> – values for where clause (see usage above)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(str) sql command</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.query.table_names">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.query.</span></span><span class="sig-name descname"><span class="pre">table_names</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'dse-regenag'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'BiomassTrends'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'table_name'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">QueryJob</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/query.html#table_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.query.table_names" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-spectral_trend_database.runner">
<span id="spectral-trend-database-runner-module"></span><h2>spectral_trend_database.runner module<a class="headerlink" href="#module-spectral_trend_database.runner" title="Link to this heading">¶</a></h2>
<p>methods for running scripts</p>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.destination_strings">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">destination_strings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcs_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_base_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_ext</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'json'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dry_run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#destination_strings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.destination_strings" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.get_data_vars">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">get_data_vars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Row</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#get_data_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.get_data_vars" title="Link to this definition">¶</a></dt>
<dd><p>get data_var names from data</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.get_paths">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">get_paths</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcs_folder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#get_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.get_paths" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.mapper">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">mapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'sequential'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'threadpool'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'pool'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Callable</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#mapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.mapper" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.post_process_row">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">post_process_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#post_process_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.post_process_row" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.print_errors">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">print_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#print_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.print_errors" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.runner.save_to_gcp">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.runner.</span></span><span class="sig-name descname"><span class="pre">save_to_gcp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">local_dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcs_dest</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">table_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bigquery_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcs_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noisy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/runner.html#save_to_gcp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.runner.save_to_gcp" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-spectral_trend_database.smoothing">
<span id="spectral-trend-database-smoothing-module"></span><h2>spectral_trend_database.smoothing module<a class="headerlink" href="#module-spectral_trend_database.smoothing" title="Link to this heading">¶</a></h2>
<p>Methods for smoothing dataset</p>
<p>The main method, <cite>smooth(…)</cite>, takes a number of steps:</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>linear interpolation</p></li>
<li><p>remove drops</p></li>
<li><p>sg smoothing</p></li>
<li><p>window smoothing</p></li>
</ol>
</div></blockquote>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.daily_dataset">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">daily_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">days</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'nearest'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'pad'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'ffill'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'backfill'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'bfill'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#daily_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.daily_dataset" title="Link to this definition">¶</a></dt>
<dd><p>transform a dataset to a (n-)day dataset</p>
<p>takes a dataset with datetime coordinate and returns
the same data at regular n-day (n=&lt;days&gt;) dataset.</p>
<p>the additional days added to the series are by default
filled with np.nan but adjust with the &lt;method&gt; argument.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>xr.dataset</em><em>|</em><em>xr.data_array</em>) – data to be transformed</p></li>
<li><p><strong>days</strong> (<em>int</em>) – number of days between points (defaults to daily)</p></li>
<li><p><strong>start/end_date</strong> (<em>str</em><em>[</em><em>'%y-%M-%d'</em><em>]</em><em>|</em><em>None</em>) – start/end_date. if None use first and/or last date in &lt;data&gt;</p></li>
<li><p><strong>method</strong> (<em>str</em>) – one of [None, ‘nearest’, ‘pad’/’ffill’, ‘backfill’/’bfill’] (for details:
<a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.reindex.html">https://docs.xarray.dev/en/stable/generated/xarray.DataArray.reindex.html</a>).</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to include.
if &lt;data_vars&gt; is None all data_vars will be used</p></li>
<li><p><strong>exclude</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to exclude.</p></li>
<li><p><strong>rename</strong> (<em>dict</em>) – [only used for xr data] mapping from data_var name to renamed data_var name</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>xr.dataset or xr.data_arrray with regualry spaced &lt;n-day&gt; series.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.ewma">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">ewma</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">span</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'sma'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'mean'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sma'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#ewma"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.ewma" title="Link to this definition">¶</a></dt>
<dd><p>exponentially weighted moving average</p>
<p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – source np.array</p></li>
<li><p><strong>alpha</strong> (<em>float</em><em>[</em><em>0</em><em>,</em><em>0.8</em><em>]</em><em>|</em><em>None</em>) – smoothing factor: required if span is None. 1 - no smoothing, 0 - max smoothing.
note: max alpha of 0.8 is because in our formulation we are requiring span &gt; 1.</p></li>
<li><p><strong>span</strong> (<em>int</em><em>|</em><em>None</em>) – effective window size: required if alpha is None (slpha = 2 / (alpha + 1))</p></li>
<li><p><strong>init_value</strong> (‘sma’|’mean’<a href="#id93"><span class="problematic" id="id94">|</span></a>float|list/array|func|False) – <dl>
<dt>if init_value:</dt><dd><p>use data[0] as first/0-th term (ewm_0) in exponentially weighted moving average
sets the first/0-th term (ewm_0) and any initial values (values_in) of the
series.</p>
<ul>
<li><dl class="simple">
<dt>’sma’:</dt><dd><p>use simple moving avg (win-size span) of data[:span] as input</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>’mean’:</dt><dd><p>use the mean of the first &lt;span&gt; values as inpput</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>float:</dt><dd><p>set the input value to &lt;init_value&gt;</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>list/array:</dt><dd><p>a list of initial values (ie np.concatenate( &lt;values_in&gt;, [ewm_0]))</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>func:</dt><dd><p>a function that takes &lt;data[:span]&gt; and returns a list of
initial values (ie np.concatenate( &lt;values_in&gt;, [ewm_0] ))</p>
</dd>
</dl>
</li>
</ul>
<p>Note: this may change the length of the series (ie input and output data may
have different lengths)</p>
</dd>
<dt>else:</dt><dd><p>use data[0] as first/0-th term (ewm_0) in exponentially weighted moving average</p>
</dd>
</dl>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(np.array) Exponentially weighted moving average.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.interpolate_na">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">interpolate_na</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'linear'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nearest'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'nearest-up'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'zero'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'slinear'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'quadratic'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'cubic'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'previous'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'next'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extrapolate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#interpolate_na"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.interpolate_na" title="Link to this definition">¶</a></dt>
<dd><p>interpolate series np.array</p>
<p>Replaces np.nan in a 1-d array with interpolation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – source data</p></li>
<li><p><strong>method</strong> (<em>str</em>) – <p>one of ‘linear’, ‘nearest’, ‘nearest-up’, ‘zero’, ‘slinear’,
‘quadratic’, ‘cubic’, ‘previous’ or ‘next’. for details see
<a class="reference external" href="https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/">https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/</a></p>
<blockquote>
<div><p>scipy.interpolate.interp1d.html</p>
</div></blockquote>
</p></li>
<li><p><strong>extrapolate</strong> (<em>bool</em>) – <p>use “extrapolate” to allow predictions outside of bounds. for details see
<a class="reference external" href="https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/">https://docs.scipy.org/doc/scipy-1.12.0/reference/generated/</a></p>
<blockquote>
<div><p>scipy.interpolate.interp1d.html</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(np.array|xr.dataset|xr.data_array) linearly interpolated data
if &lt;return_data_var&gt; return tuple (data, &lt;result_data_var&gt;)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.kernel_smoothing">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">kernel_smoothing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#kernel_smoothing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.kernel_smoothing" title="Link to this definition">¶</a></dt>
<dd><p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>Smoothes data by convolution over kernel</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em><em>|</em><em>xr.dataset</em><em>|</em><em>xr.data_array</em>) – source np.array|xr.dataset|xr.data_array</p></li>
<li><p><strong>kernel</strong> (<em>np.array</em>) – kernel for convolution</p></li>
<li><p><strong>normalize</strong> (<em>bool</em>) – if true normalize kernel by <cite>&lt;kernel&gt;=&lt;kernel&gt;/&lt;kernel&gt;.sum()</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(np.array) data convolved over kernel</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.linear_window_smoothing">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">linear_window_smoothing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slope</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#linear_window_smoothing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.linear_window_smoothing" title="Link to this definition">¶</a></dt>
<dd><p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>Smoothes data by replacing values with weighted-mean over window</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – input 1-d array in which to replace data</p></li>
<li><p><strong>radius</strong> (<em>int</em>) – half-size of window</p></li>
<li><p><strong>slope</strong> (<em>float</em>) – slope of line</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(np.array) linear-window-smoothed version of data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.linearly_interpolate">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">linearly_interpolate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#linearly_interpolate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.linearly_interpolate" title="Link to this definition">¶</a></dt>
<dd><p>linearly interpolate time series</p>
<p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>Replaces np.nan in a 1-d array with linear interpolation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data</strong> (<em>np.array</em><em>|</em><em>xr.data_array</em>) – 1-d np-array</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>np.array with np.nan replaced by with linear interpolation</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.macd_processor">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">macd_processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spans</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ewma_init_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'sma'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'mean'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'sma'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#macd_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.macd_processor" title="Link to this definition">¶</a></dt>
<dd><p>moving average convergence divergence (divergence)</p>
<p>Computes Moving Average Convergence Divergence (MACD). For len(&lt;spans&gt;) == 3,
it also computes MACD-divergence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.XR</em>) – source np.array|xr.dataset|xr.data_array</p></li>
<li><p><strong>spans</strong> (<em>Sequence</em><em>[</em><em>int</em><em>]</em>) – <p>list of window_sizes. Must have exactly 2 or 3 elements.
if len(&lt;spans&gt;) == 2:</p>
<blockquote>
<div><p>compute and return the moving-average-convergence-divergence
<cite>macd_values = ewma(data, spans[0]) - ewma(data, spans[1])</cite></p>
</div></blockquote>
<dl class="simple">
<dt>elif len(&lt;spans&gt;) == 3:</dt><dd><p>compute <cite>macd_values</cite> as above and then compute the MACD divergence
<cite>macd_div = macd_values - ewma(macd_values, spans[2])</cite></p>
</dd>
</dl>
</p></li>
<li><p><strong>ewma_init_value</strong> (<em>types.EWM_INITALIZER</em>) – <cite>init_value</cite> argument for <cite>ewma</cite>.
see ewma-doc-strings for details.</p></li>
<li><p><strong>result_only</strong> (<em>bool = False</em>) – if True return final output (macd or macd_div)
otherwise: return stack of data values ‘ema_a’, ‘ema_b’, ‘macd’, ‘ema_c’, ‘macd_div’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(types.NPXR) if &lt;result_only&gt; return final output (macd or macd_div) otherwise
return stack of data values ‘ema_a’, ‘ema_b’, ‘macd’, ‘ema_c’, ‘macd_div’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.mean_window_smoothing">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">mean_window_smoothing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#mean_window_smoothing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.mean_window_smoothing" title="Link to this definition">¶</a></dt>
<dd><p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>Smoothes data by replacing values with mean over window</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – input 1-d array in which to replace data</p></li>
<li><p><strong>radius</strong> (<em>int</em>) – half-size of window</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(np.array) mean-window-smoothed version of data</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.nan_mean_window_smoothing">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">nan_mean_window_smoothing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pad_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#nan_mean_window_smoothing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.nan_mean_window_smoothing" title="Link to this definition">¶</a></dt>
<dd><p>mean_window_smoothing that ignores NaNs</p>
<p>Note: &#64;npxr decorator could not be used because of multi-dim array indexing</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.NPXR</em>) – input 1-d array in which to replace data</p></li>
<li><p><strong>radius</strong> (<em>int</em>) – half-size of window</p></li>
<li><p><strong>pad_window</strong> (<em>Optional</em><em>[</em><em>int</em><em>] </em><em>= 1</em>) – used to preserve length of output. calculate left/rigt pad-values by taking
the mean of the left/right-most values of length &lt;pad_window&gt;</p></li>
<li><p><strong>pad_value</strong> (<em>Optional</em><em>[</em><em>float</em><em>]</em>) – if not &lt;pad_window&gt; use &lt;pad_value&gt; as the left/right pad-values</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>]</em>) – [only used for xr.dataset] list of data_vars to include</p></li>
<li><p><strong>exclude</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>]</em>) – [only used for xr.dataset] list of data_vars to exclude</p></li>
<li><p><strong>rename</strong> (<em>dict</em>) – [only used for xr data] mapping from data_var name to renamed data_var name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.npxr_execute">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">npxr_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#npxr_execute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.npxr_execute" title="Link to this definition">¶</a></dt>
<dd><p>Wrapper that extends function that takes and returns np.array to return
xarray objects using the &#64;npxr decorator.  See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – source data</p></li>
<li><p><strong>func</strong> (<em>function</em>) – function to exectue
* &lt;func&gt; must have the first argument be of type np.array.
* deocorated &lt;func&gt; must return a np.array</p></li>
<li><p><strong>**kwargs</strong> (<em>kwargs</em>) – kwargs for &lt;func&gt;</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.npxr_savitzky_golay">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">npxr_savitzky_golay</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polyorder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#npxr_savitzky_golay"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.npxr_savitzky_golay" title="Link to this definition">¶</a></dt>
<dd><p>wrapper for scipy’s savitzky-golay filter</p>
<p>NOTE: Extends function that takes and returns np.array to return
xarray objects using the &#64;npxr decorator.  See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>See Scipy’s documentation for details:</p>
<p><a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – data source (“x” arg for scipy.signal.savgol_filter)</p></li>
<li><p><strong>window_length</strong> (<em>int</em>) – The length of the filter window (i.e., the number of coefficients). If mode is
‘interp’, window_length must be less than or equal to the size of x.</p></li>
<li><p><strong>polyorder</strong> (<em>int</em>) – The order of the polynomial used to fit the samples. polyorder must be less than
window_length.</p></li>
<li><p><strong>**kwargs</strong> (<em>kwargs</em>) – includes deriv, delta, axis, mode, cval (see scipy docs for details)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.remove_drops">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">remove_drops</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_pad_window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smoothing_pad_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#remove_drops"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.remove_drops" title="Link to this definition">¶</a></dt>
<dd><p>Replaces points in data where the value has a large dip by</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.NPDASK</em>) – source np.array|xr.dataset|xr.data_array</p></li>
<li><p><strong>drop_threshold</strong> (<em>float = 0.5</em>) – replace data if data/smooth_data &lt;= &lt;drop_ratio&gt;</p></li>
<li><p><strong>smoothing_radius</strong> (<em>int = 16</em>) – radius used in <cite>linear_window_smoothing</cite></p></li>
<li><p><strong>smoothing_pad_window</strong> (<em>Optional</em><em>[</em><em>int</em><em>] </em><em>= 1</em>) – used to preserve length of output. calculate left/rigt pad-values by taking
the mean of the left/right-most values of length &lt;pad_window&gt;</p></li>
<li><p><strong>smoothing_pad_value</strong> (<em>Optional</em><em>[</em><em>float</em><em>]</em>) – if not &lt;pad_window&gt; use &lt;pad_value&gt; as the left/right pad-values</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>data with drops removed and replaced by nan</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.replace_windows">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">replace_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replacement_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#replace_windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.replace_windows" title="Link to this definition">¶</a></dt>
<dd><p>replace data with replacement data for windows around indices</p>
<p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>Replaces data around indices.  For instance, if &lt;radius&gt;=2 and
there is an index=6 the following data will be replaced</p>
<p><cite>data[[4,5,6,7,8]] = replacement_data[[4,5,6,7,8]]</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – input 1-d array in which to replace data</p></li>
<li><p><strong>with</strong> (<em>replacement_data 1-d array to replace data</em>)</p></li>
<li><p><strong>indices</strong> (<em>list</em><em>|</em><em>np.array</em>) – indices around wich to replace data</p></li>
<li><p><strong>radius</strong> (<em>int</em>) – half-size of window</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>np.array with data around &lt;indices&gt; replaced</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.savitzky_golay_processor">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">savitzky_golay_processor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polyorder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">daily_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_drops_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolate_args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#savitzky_golay_processor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.savitzky_golay_processor" title="Link to this definition">¶</a></dt>
<dd><p>!!!!!!!!!!!!!!!!! WIP !!!!!!!!!!!!!!!!!</p>
<p>Wrapper for <cite>spectral_trend_database.utils.npxr.sequence</cite> to run a series of smoothing steps</p>
<dl class="simple">
<dt>Steps:</dt><dd><ol class="arabic simple">
<li><p>daily_dataset</p></li>
<li><p>interpolate_na</p></li>
<li><p>remove_drops</p></li>
<li><p>interpolate_na</p></li>
<li><p>npxr_savitzky_golay</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.NPXR</em>) – source data</p></li>
<li><p><strong>window_length</strong> (<em>int = DEFAULT_SG_WINDOW_LENGTH</em>) – window_length for sig.savgol_filter</p></li>
<li><p><strong>polyorder</strong> (<em>int = DEFAULT_SG_POLYORDER</em>) – polyorder for sig.savgol_filter</p></li>
<li><p><strong>daily_args</strong> (<em>Optional</em><em>[</em><em>types.ARGS_KWARGS</em><em>] </em><em>= None</em>)</p></li>
<li><p><strong>remove_drops_args</strong> (<em>Optional</em><em>[</em><em>types.ARGS_KWARGS</em><em>] </em><em>= None</em>)</p></li>
<li><p><strong>interpolate_args</strong> (<em>Optional</em><em>[</em><em>types.ARGS_KWARGS</em><em>] </em><em>= None</em>)</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>Union</em><em>[</em><em>str</em><em>, </em><em>Sequence</em><em>]</em><em>]</em><em>] </em><em>= None</em>)</p></li>
<li><p><strong>exclude</strong> (<em>Sequence</em><em>[</em><em>str</em><em>] </em><em>=</em><em> [</em><em>]</em>)</p></li>
<li><p><strong>rename</strong> (<em>Union</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>Sequence</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>]</em><em>] </em><em>= {}</em>)</p></li>
<li><p><strong>**kwargs</strong> – additional kwargs for sig.savgol_filter</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(types.NPXR) data with smoothed data values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.smoothing.simple_moving_average">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.smoothing.</span></span><span class="sig-name descname"><span class="pre">simple_moving_average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">win_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/smoothing.html#simple_moving_average"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.smoothing.simple_moving_average" title="Link to this definition">¶</a></dt>
<dd><p>simple moving average</p>
<p>NOTE: This method is decorated by &#64;npxr to accept/return xarray objects. See <cite>npxr</cite>
doc-strings for details and description of additional args.</p>
<p>Traditional simple moving average, with leading edge calculated so they are the average
of all available data. Namely,</p>
<p>for j &lt; win_size:  avg_{j} = arr[:j].mean()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.array</em>) – 1-d numpy array</p></li>
<li><p><strong>win_size</strong> (<em>int</em>) – window-size</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>simple moving average of &lt;arr&gt;</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-spectral_trend_database.spectral">
<span id="spectral-trend-database-spectral-module"></span><h2>spectral_trend_database.spectral module<a class="headerlink" href="#module-spectral_trend_database.spectral" title="Link to this heading">¶</a></h2>
<p>methods for computing spectral indices</p>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.spectral.add_index_arrays">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.spectral.</span></span><span class="sig-name descname"><span class="pre">add_index_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bands</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['blue',</span> <span class="pre">'green',</span> <span class="pre">'red',</span> <span class="pre">'nir',</span> <span class="pre">'swir1',</span> <span class="pre">'swir2']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'date'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'datetime64[ms]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['sample_id',</span> <span class="pre">'year']</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataFrame</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/spectral.html#add_index_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.spectral.add_index_arrays" title="Link to this definition">¶</a></dt>
<dd><p>add_spectral_indices</p>
<p>Creates a copy of passed dataframe with (array-value) spectral index
columns added.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.DataFrame</em>) – dataframe containing (array valued) spectral band and coord columns</p></li>
<li><p><strong>name</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>str = c.DEFAULT_SPECTRAL_INDEX_CONFIG</em>) – NOTE: only used if <cite>indices</cite> below is None:
name of, or path to, config file.
if re.search(r’(yaml|yml)$’, &lt;name&gt;) loads yaml file with at path at &lt;name&gt;
else load yaml at ‘&lt;project-root&gt;/config/spectral_indices/&lt;name&gt;.yaml’</p></li>
<li><p><strong>indices</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – config containing spectral-index equations</p></li>
<li><p><strong>bands</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>= landsat.HARMONIZED_BANDS</em>) – list of spectral band nanmes used in equations</p></li>
<li><p><strong>coord</strong> (<em>str = 'date'</em>) – key for coordinate column</p></li>
<li><p><strong>coord_type</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= DATETIME_MS</em>) – if truthy convert &lt;coord&gt; arrays to &lt;coord_type&gt;</p></li>
<li><p><strong>keep</strong> (<em>Optional</em><em>[</em><em>list</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= ID_COLUMNS</em>) – <ul>
<li><p>list of columns to keep from the original dataframe</p></li>
<li><p>&lt;coord&gt; is always included</p></li>
<li><p>if falsey all columns will be preserved</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(pd.DataFrame)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.spectral.index_arrays">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.spectral.</span></span><span class="sig-name descname"><span class="pre">index_arrays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bands</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['blue',</span> <span class="pre">'green',</span> <span class="pre">'red',</span> <span class="pre">'nir',</span> <span class="pre">'swir1',</span> <span class="pre">'swir2']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'date'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/spectral.html#index_arrays"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.spectral.index_arrays" title="Link to this definition">¶</a></dt>
<dd><p>computes spectral indices</p>
<p>Computes spectral indices from a pd.Series (dataframe row) of band-valued
timeseries</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row</strong> (<em>pd.Series</em>) – series containing spectral band and coord arrays</p></li>
<li><p><strong>indices</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – config containing spectral-index equations</p></li>
<li><p><strong>bands</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>=landsat.HARMONIZED_BANDS</em>) – list of spectral band nanmes used in equations</p></li>
<li><p><strong>coord</strong> (<em>str='date'</em>) – key for coordinate column</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(list[np.ndarray]) of spectral index values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.spectral.index_config">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.spectral.</span></span><span class="sig-name descname"><span class="pre">index_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'v1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract_indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/spectral.html#index_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.spectral.index_config" title="Link to this definition">¶</a></dt>
<dd><p>load spectral index config</p>
<p>convinence wrapper of <cite>utils.read_yaml</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str = c.DEFAULT_SPECTRAL_INDEX_CONFIG</em>) – name of, or path to, config file.
if re.search(r’(yaml|yml)$’, &lt;name&gt;) loads yaml file with at path at &lt;name&gt;
else load yaml at ‘&lt;project-root&gt;/config/spectral_indices/&lt;name&gt;.yaml’</p></li>
<li><p><strong>extract_indices</strong> (<em>bool=True</em>) – if true extract the <cite>[indices]</cite> from the yaml file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>spectral index config</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-spectral_trend_database.types">
<span id="spectral-trend-database-types-module"></span><h2>spectral_trend_database.types module<a class="headerlink" href="#module-spectral_trend_database.types" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.types.type_args">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.types.</span></span><span class="sig-name descname"><span class="pre">type_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dtype</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/types.html#type_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.types.type_args" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-spectral_trend_database.utils">
<span id="spectral-trend-database-utils-module"></span><h2>spectral_trend_database.utils module<a class="headerlink" href="#module-spectral_trend_database.utils" title="Link to this heading">¶</a></h2>
<p>utility methods</p>
<dl class="simple">
<dt>License:</dt><dd><p>BSD, see LICENSE.md</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.append_ldjson">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">append_ldjson</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#append_ldjson"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.append_ldjson" title="Link to this definition">¶</a></dt>
<dd><p>append/create line to line deliminated json file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.cast_duck_array">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">cast_duck_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'str'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#cast_duck_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.cast_duck_array" title="Link to this definition">¶</a></dt>
<dd><p>Convience method to cast array. The main purpuse is avoiding
lambdas in <cite>dataframe.apply(…)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> (<em>Iterable</em>) – array-like object to cast</p></li>
<li><p><strong>dtype</strong> (<em>str = 'str'</em>) – dtype to cast to</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy array with type &lt;dtype&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.dataset_to_ndarray">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">dataset_to_ndarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#dataset_to_ndarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.dataset_to_ndarray" title="Link to this definition">¶</a></dt>
<dd><p>converts xr.dataset to ndarray of &lt;data&gt;.data_vars values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>xr.Dataset</em>) – dataset to extract array</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – list of data_var names to include. if None all data_vars will be used</p></li>
<li><p><strong>exclude</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – list of data_var names to exclude.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy array extracted from xr dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.filter_list_valued_columns">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">filter_list_valued_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#filter_list_valued_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.filter_list_valued_columns" title="Link to this definition">¶</a></dt>
<dd><p>remove values within array-valued columns</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row</strong> (<em>pd.Series</em>) – series containing &lt;coord_col&gt;, and &lt;data_cols&gt;,</p></li>
<li><p><strong>test</strong> (<em>Callable</em>) – function which takes an array and returns an boolean array with
True values for data that should be removed and
False values for data that should remain</p></li>
<li><p><strong>coord_col</strong> (<em>str</em>) – coordinate array column</p></li>
<li><p><strong>data_cols</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – data array columns</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of value lists [[coord_values],data_values]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.infinite_along_axis">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">infinite_along_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#infinite_along_axis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.infinite_along_axis" title="Link to this definition">¶</a></dt>
<dd><p>Convience wrapper of np.isfinite, that negates to
find infinite values along axis. Note that this finds np.nans,
and if arr -&gt; arr.astype(np.float64) Nones also
become np.nans.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>np.ndarray</em>) – np.array</p></li>
<li><p><strong>axis</strong> (<em>int = 0</em>) – axis to check along</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.list_prefixes">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">list_prefixes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefixes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#list_prefixes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.list_prefixes" title="Link to this definition">¶</a></dt>
<dd><p>prefix list with lists</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.message">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'info'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#message"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.message" title="Link to this definition">¶</a></dt>
<dd><p>print or return message</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.nan_to_safe_nan">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">nan_to_safe_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#nan_to_safe_nan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.nan_to_safe_nan" title="Link to this definition">¶</a></dt>
<dd><p>replace nan values with a “safe” bigquery value</p>
<p>BigQuery was not working with mixed none/float array valued columns.
<cite>nan_to_safe_nan</cite> and <cite>safe_nan_to_nan</cite> allow one to transfer back
and forth between np.nan and constants.SAFE_NAN_VALUE</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.npxr_rename">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">npxr_rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'prefix'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'suffix'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'replace'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'prefix'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#npxr_rename"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.npxr_rename" title="Link to this definition">¶</a></dt>
<dd><p>convince wrapper for rename_dataset/data_array</p>
<p>Note: if data is np.ndarray this method simply returns the passed data</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.DNPXR</em>) – np.ndarray (to be passed through) or, data-array/dataset to be renamed</p></li>
<li><p><strong>rename</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>str</em><em>]</em><em>] </em><em>= None</em>) – <dl class="simple">
<dt>if x.Dataset:</dt><dd><p>if str: rename with &lt;rename&gt; for all data_vars
elif list: rename with &lt;rename&gt; values for paired data_var
elif dict: rename using dataset.rename(&lt;rename&gt;)</p>
</dd>
<dt>elif xr.DataArray:</dt><dd><p>prefix, suffix or replacement value for name</p>
</dd>
</dl>
</p></li>
<li><p><strong>action</strong> (<em>Union</em><em>[</em><em>Literal</em><em>[</em><em>'prefix'</em><em>, </em><em>'suffix'</em><em>, </em><em>'replace'</em><em>]</em><em>] </em><em>= DEFAULT_ACTION</em>) – if prefix name =&gt; &lt;rename&gt;_&lt;data_array&gt;.name
elif suffix name =&gt; &lt;data_array&gt;.name_&lt;rename&gt;
elif replace name =&gt; &lt;rename&gt;</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>renamed data-array/dataset or original np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.npxr_shape">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">npxr_shape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_var_index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#npxr_shape"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.npxr_shape" title="Link to this definition">¶</a></dt>
<dd><p>convience method for determining shape of ndarray, dataset, or data_array</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.npxr_stack">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">npxr_stack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">Dataset</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">DataArray</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raise_align_error</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#npxr_stack"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.npxr_stack" title="Link to this definition">¶</a></dt>
<dd><p>safely stack datasets, data-arrays, or np.arrays</p>
<p>if data is np.ndarray wrapper for np.vstack
elif data is xr.DataArray  wrapper for stack_data_arrays above
elif data is xr.Dataset wrapper for stack_datasets above</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>Union</em><em>[</em><em>list</em><em>[</em><em>np.ndarray</em><em>]</em><em>, </em><em>list</em><em>[</em><em>xr.Dataset</em><em>]</em><em>, </em><em>list</em><em>[</em><em>xr.DataArray</em><em>]</em><em>]</em>) – list of data to stack</p></li>
<li><p><strong>dim</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= None</em>) – [xr.dataset only] dim to stack along. if None use coord of first
dataset in datasets</p></li>
<li><p><strong>raise_align_error</strong> (<em>bool = False</em>) – [xr.dataset only] if True raise error if datasets
do not align. Otherwise silently return None</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dataset stacking datasets along &lt;dim&gt;</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.read_yaml">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">read_yaml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">key_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">safe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Any</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#read_yaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.read_yaml" title="Link to this definition">¶</a></dt>
<dd><p>Reads (and optionally extracts part of) yaml file</p>
<p>Usage:</p>
<p><code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">data</span> <span class="pre">=</span> <span class="pre">read_yaml(path)</span>
<span class="pre">data_with_key_path</span> <span class="pre">=</span> <span class="pre">read_yaml(path,'a','b','c')</span>
<span class="pre">data['a']['b']['c']</span> <span class="pre">==</span> <span class="pre">data_with_key_path</span> <span class="pre">#</span> <span class="pre">==&gt;</span> <span class="pre">True</span>
<span class="pre">`</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<em>str</em>) – path to yaml file</p></li>
<li><p><strong>*key_path</strong> (<a href="#id95"><span class="problematic" id="id96">*</span></a>str) – key-path to extract</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary, or data extracted, from yaml file</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.rename_data_array">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">rename_data_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_array</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'prefix'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'suffix'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'replace'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'prefix'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataArray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#rename_data_array"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.rename_data_array" title="Link to this definition">¶</a></dt>
<dd><p>rename data array by prefixing suffixing or replacing value
:param data_array: data-array to be renamed
:type data_array: xr.DataArray
:param rename: prefix, suffix or replacement value for name
:type rename: Optional[str] = None
:param action: if prefix name =&gt; &lt;rename&gt;_&lt;data_array&gt;.name</p>
<blockquote>
<div><p>elif suffix name =&gt; &lt;data_array&gt;.name_&lt;rename&gt;
elif replace name =&gt; &lt;rename&gt;</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>renamed data-array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.rename_dataset">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">rename_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'prefix'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'suffix'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'replace'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'prefix'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#rename_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.rename_dataset" title="Link to this definition">¶</a></dt>
<dd><p>rename dataset data_vars by prefixing suffixing or replacing value
:param data_array: data-array to be renamed
:type data_array: xr.DataArray
:param rename: if str: rename with &lt;rename&gt; for all data_vars</p>
<blockquote>
<div><p>elif list: rename with &lt;rename&gt; values for paired data_var
elif dict: rename using dataset.rename(&lt;rename&gt;)</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>action</strong> (<em>Union</em><em>[</em><em>Literal</em><em>[</em><em>'prefix'</em><em>, </em><em>'suffix'</em><em>, </em><em>'replace'</em><em>]</em><em>] </em><em>= DEFAULT_ACTION</em>) – if prefix name =&gt; &lt;rename&gt;_&lt;data_array&gt;.name
elif suffix name =&gt; &lt;data_array&gt;.name_&lt;rename&gt;
elif replace name =&gt; &lt;rename&gt;</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>renamed data-array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.replace_dataset_values">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">replace_dataset_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#replace_dataset_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.replace_dataset_values" title="Link to this definition">¶</a></dt>
<dd><p>TODO</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.row_to_xr">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">row_to_xr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Series</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'datetime64[ns]'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#row_to_xr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.row_to_xr" title="Link to this definition">¶</a></dt>
<dd><p>converts a pd.Series/row of pd.DataFrame to an xr.Dataset</p>
<p>Creates a Dataset whose data_var values are given by &lt;data_vars&gt; keys, paramatrized by
coordinate &lt;coord&gt;.  All other values in &lt;row&gt; are added as attributes unless they are
contained in &lt;exclude&gt;</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row</strong> (<em>pd.Series</em>) – series containing coordinate, data_vars, and attributes</p></li>
<li><p><strong>coord</strong> (<em>str</em>) – key for coordinate value</p></li>
<li><p><strong>data_vars</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of keys for data_vars values</p></li>
<li><p><strong>coord_type</strong> (<em>Optional</em><em>[</em><em>str</em><em>] </em><em>= c.DATETIME_NS</em>) – if passed coord_array will be cast to &lt;coord_type&gt;. used to avoid
‘non-nanosecond precision’ warning from xarray</p></li>
<li><p><strong>attrs</strong> (<em>Union</em><em>[</em><em>bool</em><em>, </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>] </em><em>= True</em>) – TODO …list of keys to  … from attributes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>xr.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.rows_to_xr">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">rows_to_xr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coord</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attr_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_attrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">sel_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#rows_to_xr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.rows_to_xr" title="Link to this definition">¶</a></dt>
<dd><p>Generate a xr.dataset from dataframe</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> (<em>pd.DataFrame</em>) – data to convert to xarray dataset</p></li>
<li><p><strong>coord</strong> (<em>str</em>) – coordinate row</p></li>
<li><p><strong>attr_cols</strong> (<em>list =</em><em> [</em><em>]</em>) – columns to use for attrs with shared values across rows</p></li>
<li><p><strong>list_attrs</strong> (<em>list =</em><em> [</em><em>]</em>) – columns to use for attrs that become list of row values</p></li>
<li><p><strong>sel</strong> (<em>Optional</em><em>[</em><em>Union</em><em>[</em><em>Callable</em><em>, </em><em>dict</em><em>]</em><em>] </em><em>= None</em>) – dict or method that takes the row (<a href="#id97"><span class="problematic" id="id98">**</span></a>and sel_kwargs) and returns a dict
to be used as <cite>ds.sel</cite> kwargs.</p></li>
<li><p><strong>**sel_kwargs</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – if &lt;sel&gt; above is callable, &lt;sel&gt; is called with
the row along with these kwargs: ie <cite>sel(row, **sel_kwargs)</cite></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>rows data as xr.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.safe_nan_to_nan">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">safe_nan_to_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#safe_nan_to_nan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.safe_nan_to_nan" title="Link to this definition">¶</a></dt>
<dd><p>replace “safe” bigquery value with nan</p>
<p>BigQuery was not working with mixed none/float array valued columns.
<cite>nan_to_safe_nan</cite> and <cite>safe_nan_to_nan</cite> allow one to transfer back
and forth between np.nan and constants.SAFE_NAN_VALUE</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.to_ndarray">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">to_ndarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Array</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#to_ndarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.to_ndarray" title="Link to this definition">¶</a></dt>
<dd><p>convience method for converting data to ndarray</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>types.NPXR</em>) – dataset to extract array</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to include. if None all data_vars will be used</p></li>
<li><p><strong>exclude</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – (xr.dataset only) list of data_var names to exclude.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>numpy array extracted from xr data, or original np/dask array</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.xr_coord_name">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">xr_coord_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_var</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#xr_coord_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.xr_coord_name" title="Link to this definition">¶</a></dt>
<dd><p>extract coord-name from xr data
:param data: xr data
:type data: types.XR
:param data_var: name of data_var (only use if &lt;data&gt; is xr.Dataset)
:type data_var: Optional[str] = None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(str) coord name</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.xr_stats">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">xr_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skew_kurtosis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#xr_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.xr_stats" title="Link to this definition">¶</a></dt>
<dd><p>compute stats for dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>xr.Dataset</em>) – dataset on which to compute stats</p></li>
<li><p><strong>data_vars</strong> (<em>Optional</em><em>[</em><em>Sequence</em><em>[</em><em>str</em><em>]</em><em>] </em><em>= None</em>) – data_vars to compute stats on. if none use all data_vars</p></li>
<li><p><strong>axis</strong> (<em>Optional</em><em>[</em><em>int</em><em>] </em><em>= -1</em>) – axis along which to compute stats</p></li>
<li><p><strong>skew_kurtosis</strong> (<em>bool = True</em>) – if true also include skew, kurtosis in stats</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(xr.Dataset) dataset whose data_vars are stats values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="spectral_trend_database.utils.xr_to_row">
<span class="sig-prename descclassname"><span class="pre">spectral_trend_database.utils.</span></span><span class="sig-name descname"><span class="pre">xr_to_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_vars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">as_pandas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Series</span></span></span><a class="reference internal" href="../_modules/spectral_trend_database/utils.html#xr_to_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#spectral_trend_database.utils.xr_to_row" title="Link to this definition">¶</a></dt>
<dd><p>transfor xr.dataset to dict or pd.series
:param row: series containing coordinate, data_vars, and attributes
:type row: pd.Series
:param data_vars: list of keys for data_vars values. if None use all data_vars
:type data_vars: list[str]
:param exclude: list of keys to exclude from attributes.
:type exclude: list[str] = []
:param as_pandas: if true return pd.Series, else return dict
:type as_pandas: bool = True</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict or pd.series with &lt;dataset&gt; attrs, coords, and data_vars as key/values</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-spectral_trend_database">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-spectral_trend_database" title="Link to this heading">¶</a></h2>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="spectral_trend_database.gee.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">spectral_trend_database.gee package</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Brookie Guzder-Williams
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">spectral_trend_database package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-spectral_trend_database.config">spectral_trend_database.config module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.config.ConfigHandler"><code class="docutils literal notranslate"><span class="pre">ConfigHandler</span></code></a><ul>
<li><a class="reference internal" href="#spectral_trend_database.config.ConfigHandler.get"><code class="docutils literal notranslate"><span class="pre">ConfigHandler.get()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.constants">spectral_trend_database.constants module</a></li>
<li><a class="reference internal" href="#module-spectral_trend_database.gcp">spectral_trend_database.gcp module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.gcp.create_or_update_table_from_json"><code class="docutils literal notranslate"><span class="pre">create_or_update_table_from_json()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.gcp.gcs_list"><code class="docutils literal notranslate"><span class="pre">gcs_list()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.gcp.load_or_create_dataset"><code class="docutils literal notranslate"><span class="pre">load_or_create_dataset()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.gcp.process_gcs_path"><code class="docutils literal notranslate"><span class="pre">process_gcs_path()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.gcp.save_ld_json"><code class="docutils literal notranslate"><span class="pre">save_ld_json()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.gcp.upload_file"><code class="docutils literal notranslate"><span class="pre">upload_file()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.npxr">spectral_trend_database.npxr module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.npxr.execute_func"><code class="docutils literal notranslate"><span class="pre">execute_func()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.npxr.npxr"><code class="docutils literal notranslate"><span class="pre">npxr()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.npxr.post_process_npxr_data"><code class="docutils literal notranslate"><span class="pre">post_process_npxr_data()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.npxr.sequencer"><code class="docutils literal notranslate"><span class="pre">sequencer()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.paths">spectral_trend_database.paths module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.paths.gcs"><code class="docutils literal notranslate"><span class="pre">gcs()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.paths.local"><code class="docutils literal notranslate"><span class="pre">local()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.query">spectral_trend_database.query module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor"><code class="docutils literal notranslate"><span class="pre">QueryConstructor</span></code></a><ul>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.append"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.append()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.from_config"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.from_config()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.join"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.join()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.limit"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.limit()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.reset"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.reset()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.select"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.select()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.sql"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.sql()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.QueryConstructor.where"><code class="docutils literal notranslate"><span class="pre">QueryConstructor.where()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#spectral_trend_database.query.column_names"><code class="docutils literal notranslate"><span class="pre">column_names()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.named_sql"><code class="docutils literal notranslate"><span class="pre">named_sql()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.process_named_query_config"><code class="docutils literal notranslate"><span class="pre">process_named_query_config()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.queries"><code class="docutils literal notranslate"><span class="pre">queries()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.run"><code class="docutils literal notranslate"><span class="pre">run()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.query.table_names"><code class="docutils literal notranslate"><span class="pre">table_names()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.runner">spectral_trend_database.runner module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.runner.destination_strings"><code class="docutils literal notranslate"><span class="pre">destination_strings()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.runner.get_data_vars"><code class="docutils literal notranslate"><span class="pre">get_data_vars()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.runner.get_paths"><code class="docutils literal notranslate"><span class="pre">get_paths()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.runner.mapper"><code class="docutils literal notranslate"><span class="pre">mapper()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.runner.post_process_row"><code class="docutils literal notranslate"><span class="pre">post_process_row()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.runner.print_errors"><code class="docutils literal notranslate"><span class="pre">print_errors()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.runner.save_to_gcp"><code class="docutils literal notranslate"><span class="pre">save_to_gcp()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.smoothing">spectral_trend_database.smoothing module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.daily_dataset"><code class="docutils literal notranslate"><span class="pre">daily_dataset()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.ewma"><code class="docutils literal notranslate"><span class="pre">ewma()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.interpolate_na"><code class="docutils literal notranslate"><span class="pre">interpolate_na()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.kernel_smoothing"><code class="docutils literal notranslate"><span class="pre">kernel_smoothing()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.linear_window_smoothing"><code class="docutils literal notranslate"><span class="pre">linear_window_smoothing()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.linearly_interpolate"><code class="docutils literal notranslate"><span class="pre">linearly_interpolate()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.macd_processor"><code class="docutils literal notranslate"><span class="pre">macd_processor()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.mean_window_smoothing"><code class="docutils literal notranslate"><span class="pre">mean_window_smoothing()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.nan_mean_window_smoothing"><code class="docutils literal notranslate"><span class="pre">nan_mean_window_smoothing()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.npxr_execute"><code class="docutils literal notranslate"><span class="pre">npxr_execute()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.npxr_savitzky_golay"><code class="docutils literal notranslate"><span class="pre">npxr_savitzky_golay()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.remove_drops"><code class="docutils literal notranslate"><span class="pre">remove_drops()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.replace_windows"><code class="docutils literal notranslate"><span class="pre">replace_windows()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.savitzky_golay_processor"><code class="docutils literal notranslate"><span class="pre">savitzky_golay_processor()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.smoothing.simple_moving_average"><code class="docutils literal notranslate"><span class="pre">simple_moving_average()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.spectral">spectral_trend_database.spectral module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.spectral.add_index_arrays"><code class="docutils literal notranslate"><span class="pre">add_index_arrays()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.spectral.index_arrays"><code class="docutils literal notranslate"><span class="pre">index_arrays()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.spectral.index_config"><code class="docutils literal notranslate"><span class="pre">index_config()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.types">spectral_trend_database.types module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.types.type_args"><code class="docutils literal notranslate"><span class="pre">type_args()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database.utils">spectral_trend_database.utils module</a><ul>
<li><a class="reference internal" href="#spectral_trend_database.utils.append_ldjson"><code class="docutils literal notranslate"><span class="pre">append_ldjson()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.cast_duck_array"><code class="docutils literal notranslate"><span class="pre">cast_duck_array()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.dataset_to_ndarray"><code class="docutils literal notranslate"><span class="pre">dataset_to_ndarray()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.filter_list_valued_columns"><code class="docutils literal notranslate"><span class="pre">filter_list_valued_columns()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.infinite_along_axis"><code class="docutils literal notranslate"><span class="pre">infinite_along_axis()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.list_prefixes"><code class="docutils literal notranslate"><span class="pre">list_prefixes()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.message"><code class="docutils literal notranslate"><span class="pre">message()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.nan_to_safe_nan"><code class="docutils literal notranslate"><span class="pre">nan_to_safe_nan()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.npxr_rename"><code class="docutils literal notranslate"><span class="pre">npxr_rename()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.npxr_shape"><code class="docutils literal notranslate"><span class="pre">npxr_shape()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.npxr_stack"><code class="docutils literal notranslate"><span class="pre">npxr_stack()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.read_yaml"><code class="docutils literal notranslate"><span class="pre">read_yaml()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.rename_data_array"><code class="docutils literal notranslate"><span class="pre">rename_data_array()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.rename_dataset"><code class="docutils literal notranslate"><span class="pre">rename_dataset()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.replace_dataset_values"><code class="docutils literal notranslate"><span class="pre">replace_dataset_values()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.row_to_xr"><code class="docutils literal notranslate"><span class="pre">row_to_xr()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.rows_to_xr"><code class="docutils literal notranslate"><span class="pre">rows_to_xr()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.safe_nan_to_nan"><code class="docutils literal notranslate"><span class="pre">safe_nan_to_nan()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.to_ndarray"><code class="docutils literal notranslate"><span class="pre">to_ndarray()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.xr_coord_name"><code class="docutils literal notranslate"><span class="pre">xr_coord_name()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.xr_stats"><code class="docutils literal notranslate"><span class="pre">xr_stats()</span></code></a></li>
<li><a class="reference internal" href="#spectral_trend_database.utils.xr_to_row"><code class="docutils literal notranslate"><span class="pre">xr_to_row()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-spectral_trend_database">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=d45e8c67"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>