{"kind":"Article","sha256":"669f5b352129f1e0b8ab38ccc6724c57f2c5ff6ad853cbd857d3aba807130261","slug":"data","location":"/myst/sections/data.md","dependencies":[],"frontmatter":{"title":"Sample Selection","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Brookie Guzder-Williams","given":"Brookie","family":"Guzder-Williams"},"name":"Brookie Guzder-Williams","orcid":"0000-0001-6855-8260","corresponding":true,"email":"bguzder-williams@berkeley.edu","affiliations":["dse","ucb"],"id":"contributors-myst-generated-uid-0"},{"nameParsed":{"literal":"Maya Weltman-Fahs","given":"Maya","family":"Weltman-Fahs"},"name":"Maya Weltman-Fahs","affiliations":["dse","ucb"],"id":"contributors-myst-generated-uid-1"}],"github":"https://github.com/SchmidtDSE/map_something","affiliations":[{"id":"dse","name":"The Eric and Wendy Schmidt Center for Data Science & Environment"},{"id":"ucb","name":"University of California, Berkeley"}],"thumbnail":"/build/cornsoy-reduction-ddfb3a725f5809f1fa89d64c75aa4fac.png","exports":[{"format":"md","filename":"data.md","url":"/build/data-94c42441622b72938de715c98ad1b223.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"admonition","kind":"note","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Corn Soy Other (GEE)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"vgs93JjA7F"}],"key":"xfuwuacmBD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":8,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"csob_ic <= for each year [2000,2020]:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"XnzZP8KA59"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"select cdl for year","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"IbumPlnMh0"}],"key":"rfbKoV7l7R"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"map to corn / soy / other","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"RJ3XWFoxsb"}],"key":"gbs98TsZvs"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"remove borders:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mDzqYtgQzN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"reduce neighborhood (90-meters)","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"R1PYxDGBsC"}],"key":"V3jvFHikjb"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"im = neighborhood_im.where(neighborhood_im.neq(im), BORDER_VALUE).toInt()","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"jcgBapL7zX"}],"key":"jCxCHmIxWu"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"result im each CSO value is CSO iff its at least 90-meters from a different value otherwise B","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ChQtkxeANH"}],"key":"nKA1sH01Da"}],"key":"cqZTgeG2Vu"}],"key":"KGl5WmFP5g"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"require at least 15 years of CSO value (out of 20) to be continual_im","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FYhDDdQ0y2"}],"key":"TH605R8dra"},{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"stratified_sample of continual_im C-S-O-B [10k,10k,2k,2k]","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"yxYuwJnliN"}],"key":"GoCD8G7hCM"}],"key":"dFNhw28TnS"}],"key":"HAGZ5Cf8mD"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"result projects/dse-regenag/assets/CDL/cornsoy_other-n60-y15-p20000","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"WgSbXAOMIt"}],"key":"QBm7pPpseK"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"=> 24,000 features (10,000 Corn)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"Vp2aFTIyVu"}],"key":"sGkSm7QXxq"}],"key":"THYBCgii7Y"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"script: ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"jMFNGTlbTJ"},{"type":"link","url":"https://code.earthengine.google.com/c25c8860c473c39ee301448ca8571a6e","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"https://​code​.earthengine​.google​.com​/c25c8860c473c39ee301448ca8571a6e","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"iNdrOFLkiE"}],"urlSource":"https://code.earthengine.google.com/c25c8860c473c39ee301448ca8571a6e","key":"wvhrTcEe9D"},{"type":"text","value":"\nvisulaization script: (wip) ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"Iyd7sVoCxW"},{"type":"link","url":"https://code.earthengine.google.com/e6c0ee4ec7d3212580d2a9edeaecd3b4","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"https://​code​.earthengine​.google​.com​/e6c0ee4ec7d3212580d2a9edeaecd3b4","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"zzBDlntwu9"}],"urlSource":"https://code.earthengine.google.com/e6c0ee4ec7d3212580d2a9edeaecd3b4","key":"R28KxN3VFz"},{"type":"text","value":"\nasset: ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"enzEEUf9iq"},{"type":"inlineCode","value":"projects/dse-regenag/assets/CDL/cornsoy_other-n60-y15-p20000","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"CtRfTqEPns"}],"key":"aIcN5IXNyz"}],"key":"XRNNyMmi76"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/build/cornsoy-reduction-ddfb3a725f5809f1fa89d64c75aa4fac.png","alt":"figure: neighborhood reduction of CDL corn/soy","width":"100%","align":"center","urlSource":"../../assets/cornsoy-reduction.png","key":"f0KQfuF1wb"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"im_cld_reduction","identifier":"im_cld_reduction","html_id":"im-cld-reduction","enumerator":"1","children":[{"type":"text","value":"Figure ","key":"YVgrMgUapB"},{"type":"text","value":"1","key":"N6eRwBG2KZ"},{"type":"text","value":":","key":"oj55xTbDiT"}],"template":"Figure %s:","key":"ONMFEy1qmI"},{"type":"text","value":"Masking border values in CDL. Left: corn/soy and other, center: 60-meter radius neighborhood reduction, right: masked borders","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"xuIrwGdenK"}],"key":"BZJPjEf0GM"}],"key":"Bmg6ciCf3k"}],"label":"im_cld_reduction","identifier":"im_cld_reduction","enumerator":"1","html_id":"im-cld-reduction","key":"mu6h85HPZk"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"USDA’s ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"BL2zebBkJ2"},{"type":"link","url":"https://developers.google.com/earth-engine/datasets/catalog/USDA_NASS_CDL","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Crop Land Data Layer","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"YQWegixPai"}],"key":"tGUBOzR5Dv"}],"urlSource":"https://developers.google.com/earth-engine/datasets/catalog/USDA_NASS_CDL","key":"VlBh12ygDw"},{"type":"text","value":" was used to create a set of corn/soy sample points, i.e. points CDL labels as (in most cases alternating between) corn or soy for at least 15 years from 2000 to 2020. In order ensure we had “pure” pixels away from confounding effects of boarders and infrastructure 60-meter raidus neighborhood reductions and only kept pixel values that remained unchanged (see ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"H7dypLBg1h"},{"type":"crossReference","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Figure ","key":"SM3jFfwgT1"},{"type":"text","value":"1","key":"j1c9StYqXy"}],"identifier":"im_cld_reduction","label":"im_cld_reduction","kind":"figure","template":"Figure %s","enumerator":"1","resolved":true,"html_id":"im-cld-reduction","key":"rLEu2ew6PV"},{"type":"text","value":"). From the resulting image we selecting an initial 20,000 corn/soy points.","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"GZyAyuDxgk"}],"key":"eMi13Q6Iso"},{"type":"admonition","kind":"note","class":"dropdown","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"YIELD DATA (GEE)","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"ijZ57suag4"}],"key":"FsJnPr1ZJd"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":41,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"select cornsoy points from csob (described above)","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"R9G4tpjHHM"}],"key":"Eg7MXFrXg2"},{"type":"listItem","spread":true,"position":{"start":{"line":42,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"map over each point:\na. filter qdann corn xor soy by point\nb. compute value or neighborhood value of biomass at that point\nc. filter out values with no biomass\nd. flatten results","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"uKKhLnSxj3"}],"key":"huZrbMXsUX"}],"key":"Ray0gwdFHM"},{"type":"paragraph","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"script: ","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"AVdGdnIRGM"},{"type":"link","url":"https://code.earthengine.google.com/595bedc5425c99e83fc41de9ebf39c69","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"https://​code​.earthengine​.google​.com​/595bedc5425c99e83fc41de9ebf39c69","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"jC7B5IxN9U"}],"urlSource":"https://code.earthengine.google.com/595bedc5425c99e83fc41de9ebf39c69","key":"ENOpkqvoyL"}],"key":"ElRlOsIjOl"}],"key":"TsF8qpct4m"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"We then used these sample points to extract yield values based on ","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"o8djm3PGr8"},{"type":"link","url":"https://gee-community-catalog.org/projects/qdann/","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"QDANN","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"AilEnNbmtx"}],"urlSource":"https://gee-community-catalog.org/projects/qdann/","key":"ej8Y90PRI8"},{"type":"text","value":" (2008-2022).","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"UY90SyktuP"}],"key":"WC2K9K6maO"}],"key":"dPuYqMezpx"}],"key":"rBz3K36Qrr"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Description","url":"/intro","group":"Spectral Trend Database"},"next":{"title":"Scripts","url":"/scripts","group":"Spectral Trend Database"}}},"domain":"http://localhost:3001"}